<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./main.js"></script>
    <script src="./test.js"></script>
    <title>Keyboard Mapper test page</title>
</head>
<body>
    <div>
    <p>Sketchy example! Press letter and number keys to display a message. Press the A and S keys to change colour of the div.</p>
    <p>Not all keys update the "number of active keys" field...</p>
    </div>
    <button>start keyboard map</button>
    <button>stop keyboard map</button>
    <div id="test" style="width:100%;height:1em;"></div>
    <div id="active" style="width:100%;height:1em;">Number of active letter keys: <span id='active_number'>0</span></div>
    <div id="active" style="width:100%;height:1em;">Number of active number keys: <span id='active_number'>0</span></div>
    <br><br>
    <script>
        let noteNames = ['C','C#','D','D#','E','F','F#','G','G#','A','A#','B']
        keyboardMapper.keymap.Key = (e, item, direction)=>{
            document.querySelector('#test').innerHTML=`${item} ${direction ? 'pressed' : 'released'}`
            document.querySelector('#active_number').innerHTML = keyboardMapper.numberOfActiveKeys();
        }

        keyboardMapper.keyUp.P = ()=>{console.log('P ***')}
        keyboardMapper.keyDown.P = ()=>{console.log('P ---')}
        
        keyboardMapper.keymap.Digit = (e, item, direction)=>{
            document.querySelector('#test').innerHTML=`note ${noteNames[item]} ${direction ? 'pressed' : 'released'}`
            document.querySelector('#active_number').innerHTML = keyboardMapper.numberOfActiveKeys();
        }
        Object.assign(keyboardMapper.keyranges,{
            Key:{
                A: (e, item, direction)=>{document.querySelector('#test').style.backgroundColor=direction ? 'red' : 'white'},
                S: (e, item, direction)=>{document.querySelector('#test').style.backgroundColor=direction ? 'green' : 'white'}
            }
        })
    </script>
</body>
</html>